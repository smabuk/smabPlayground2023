<MazeTilePiece Extra
			   MazeTile="MazeTile"
			   draggable="true"
			   data-extra
			   rotate="@rotate"
			   data-rotation="@(newOrientation ?? @MazeTile.Orientation)"
			   OnClick="async () => { await AnimateRotation( 90); await RotateClockwise.InvokeAsync(); }"
			   OnContextMenu="async () => { await AnimateRotation(-90); await RotateAntiClockwise.InvokeAsync(); }"
			   @ondragstart="() => {}"
			   @ondragend="() => {}" />

@code {
	bool rotate = false;
	int? newOrientation = null;

	[Parameter, EditorRequired]
	public required MazeTile MazeTile { get; set; }

	[Parameter] public EventCallback RotateClockwise { get; set; }
	[Parameter] public EventCallback RotateAntiClockwise { get; set; }

	async Task AnimateRotation(int amount)
	{
		rotate = true;
		newOrientation = MazeTile.Orientation + amount;
		await Task.Delay(200);
		rotate = false;
		newOrientation = null;
	}
}
